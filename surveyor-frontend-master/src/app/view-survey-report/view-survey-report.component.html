<div class="container">
  <h2>Find Survey</h2>
  <div class="row">
    <div class="col-6">
      <input type="text" placeholder="Enter Claim ID" class="form-control" [(ngModel)]="inputClaimId">
    </div>
    <div class="col-6">
      <button class="btn btn-primary" (click)="getSurvey()">Find</button>
    </div>
  </div>
  <div class="row">
    <div class="col-6">
      <div *ngIf="!showData">
        No Data
      </div>
      <div class="list-group mt-2" *ngIf="showData">
        <div href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true"
          *ngFor="let item of claimData | keyvalue">
          <div class="d-flex gap-2 w-100 justify-content-between">
            <div>
              <h6 class="mb-0">{{ item.key }}</h6>
              <p class="mb-0 opacity-75">{{ item.value }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-6">
      <button *ngIf="showData" class="btn btn-primary my-4" (click)="editClaim()">Edit Claim</button>
      <form [formGroup]="claimEditForm" *ngIf="showForm" (ngSubmit)="submitForm()" class="claim-form">
        <div class="row">
          <div class="col-6">
            <label for="claimId" class="form-label">Claim ID</label>
            <input type="text" id="claimId" class="form-control" formControlName="claimId">
            <div class="error" *ngIf="claimEditForm.get('claimId')?.invalid && claimEditForm.get('claimId')?.touched">
              Claim ID is required.
            </div>
          </div>

          <div class="col-6">
            <label for="policyNo" class="form-label">Policy Number</label>
            <input type="text" id="policyNo" class="form-control" formControlName="policyNo">
            <div class="error" *ngIf="claimEditForm.get('policyNo')?.invalid && claimEditForm.get('policyNo')?.touched">
              Policy Number is required.
            </div>
          </div>

        </div>
        <div class="row">
          <div class="col-6">
            <label for="labourCharges" class="form-label">Labour Charges</label>
            <input type="number" id="labourCharges" class="form-control" formControlName="labourCharges">
            <div class="error"
              *ngIf="claimEditForm.get('labourCharges')?.invalid && claimEditForm.get('labourCharges')?.touched">
              Labour Charges is required.
            </div>
          </div>

          <div class="col-6">
            <label for="partsCost" class="form-label">Parts Cost</label>
            <input type="number" id="partsCost" class="form-control" formControlName="partsCost">
            <div class="error"
              *ngIf="claimEditForm.get('partsCost')?.invalid && claimEditForm.get('partsCost')?.touched">
              Parts Cost is required.
            </div>
          </div>

        </div>
        <div class="row">
          <div class="col-6">
            <label for="policyclass" class="form-label">Policy Class</label>
            <input type="number" id="policyclass" class="form-control" formControlName="policyClass">
            <div class="error"
              *ngIf="claimEditForm.get('policyClass')?.invalid && claimEditForm.get('policyClass')?.touched">
              Policy Class is required.</div>
          </div>

          <div class="col-6">
            <label for="depreciationCost" class="form-label">Depreciation Cost</label>
            <input type="number" id="depreciationCost" class="form-control" formControlName="depreciationCost">
            <div class="error"
              *ngIf="claimEditForm.get('depreciationCost')?.invalid && claimEditForm.get('depreciationCost')?.touched">
              Depreciation Cost is required.</div>
          </div>
          <div class="col-6">
            <label for="accidentDetails" class="form-label">Accident Details</label>
            <input type="text" id="accidentDetails" class="form-control" formControlName="accidentDetails">
            <div class="error"
              *ngIf="claimEditForm.get('accidentDetails')?.invalid && claimEditForm.get('accidentDetails')?.touched">
              Accident details is required.</div>
          </div>
        </div>
        <div class="row">
          <div class="col-6">
            <label for="totalAmount" class="form-label">Total Amount</label>
            <input type="number" id="totalAmount" class="form-control" formControlName="totalAmount">
            <div class="error"
              *ngIf="claimEditForm.get('totalAmount')?.invalid && claimEditForm.get('totalAmount')?.touched">
              Total Amount is required.</div>
          </div>

          <div class="col-6">
            <label for="vehicleAge" class="form-label">Vehicle Age</label>
            <input type="number" id="vehicleAge" class="form-control" formControlName="vehicleAge">
            <div class="error"
              *ngIf="claimEditForm.get('vehicleAge')?.invalid && claimEditForm.get('vehicleAge')?.touched">
              Vehicle Age is required.</div>
          </div>

        </div>
        <div class="row">
          <div class="col-6">
            <label for="estimateLoss" class="form-label">Estimate Loss</label>
            <input type="number" id="estimateLoss" class="form-control" formControlName="estimateLoss">
            <div class="error"
              *ngIf="claimEditForm.get('estimateLoss')?.invalid && claimEditForm.get('estimateLoss')?.touched">
              Estimate Loss is required.</div>
          </div>

          <div class="form-label col-6">
            <label for="withdrawn">Withdrawn</label>
            <input type="checkbox" id="withdrawn" formControlName="withdrawn">

            <label for="closed">Closed</label>
            <input type="checkbox" id="closed" formControlName="closed">
          </div>
        </div>

        <div *ngIf="!claimEditForm.get('withdrawn')?.value && !claimEditForm.get('closed')?.value">
          <label for="claimApprovedAmount" class="form-label">Claim Approved Amount</label>
          <input type="number" class="form-control" id="claimApprovedAmount" formControlName="claimApprovedAmount">
          <div class="error"
            *ngIf="claimEditForm.get('claimApprovedAmount')?.invalid && claimEditForm.get('claimApprovedAmount')?.touched">
            Claim Approved Amount is required.</div>
        </div>

        <button [disabled]="claimEditForm.invalid" type="submit" class="btn btn-primary">Update</button>
      </form>
      <div class="popup" *ngIf="isUpdated">
        <div class="popup-content">
          <h3 class="popup-heading">
            Claim Details Updated Successfully!
          </h3>
          <button class="btn btn-success" (click)="isUpdated=false">Okay</button>
        </div>
      </div>
    </div>
  </div>
</div>